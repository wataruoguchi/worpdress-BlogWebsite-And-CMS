!function(){var t=angular.module("app.controllers",["ui.router","ui.bootstrap","ngResource","ngScrollTo","infinite-scroll"]);t.controller("MainController",function(t,e){t.pageActive="/about"===e.path()?"about":"home",t.setActive=function(e){t.pageActive=e},t.isActive=function(e){return e===t.pageActive}}),t.controller("HomeController",function(t,e,o){t.articles=[],t.filteredResults=[],t.predicate="updatedDate",t.orderActive="newest",t.setOrder=function(e){t.orderActive=e},t.isOrder=function(e){return e===t.orderActive},t.getSearchResult=function(){t.filteredResults=o("filter")(t.articles,t.searchBox)},t.$watch("searchBox",function(){t.getSearchResult()}),t.dataResArticlesList=e("./dataRes/dataResArticlesList.php",{},{}),t.articles=t.dataResArticlesList.query(function(){angular.forEach(t.articles,function(t){var o=e("./cms/dataRes/dataResEditViewTags.php",{postId:t.postId});t.tags=o.query()})})}),t.controller("ArticleController",function(t,e,o,r,a){t.postId=o.postId,t.article=[],t.dataResArticle=e("./dataRes/dataResArticle.php",{postId:t.postId},{update:{method:"PUT"}}),t.commentarticle=[],t.article=[],t.comments=[],articleAndComments=t.dataResArticle.query(function(){(0==articleAndComments.length||null!=articleAndComments[0].replyId)&&a.go("home"),angular.forEach(articleAndComments,function(o,a){if(0==a&&null==o.replyId){o.$update(),t.article.push(o),$body=r.trustAsHtml(t.article[a].body),t.article[a].body=$body;var n=e("./cms/dataRes/dataResEditViewTags.php",{postId:o.postId});t.article[a].tags=n.query()}else t.comments.push(o)})}),t.toggle=!1,t.commentToggle=function(){t.toggle=!t.toggle},t.replyNo=0,t.replyClick=function(e){t.replyNo=t.replyNo==e?0:e},submit=function(){var e=[];e.push({replyId:t.commentarticle.replyId,name:t.commentarticle.name,email:t.commentarticle.email,url:t.commentarticle.url,message:t.commentarticle.message}),t.dataResArticle.save(e),a.transitionTo(a.current,o,{reload:!0,inherit:!1,notify:!0})},t.submitReply=function(e){console.log("reply="+e),t.commentarticle.replyId=e,submit()},t.submitComment=function(){t.commentarticle.replyId=t.postId,submit()}}),t.controller("ContactController",function(t,e,o,r){t.contact=[],t.submitContact=function(){var e=[];e.push({name:t.contact.name,email:t.contact.email,message:t.contact.message}),a.save(e),r.transitionTo(r.current,o,{reload:!0,inherit:!1,notify:!0})};var a=e("./dataRes/dataResContact.php")})}();